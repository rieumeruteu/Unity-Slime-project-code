using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class bgmManager : MonoBehaviour
{
    static public bgmManager instnce;

    private WaitForSeconds waitTime=new WaitForSeconds(0.01f);
   public AudioClip[] clips;//배경음악들
   private AudioSource source; 
    
    void Start()
    { 
        source=GetComponent<AudioSource>();
    }

    // Update is called once per frame
    void Update()
    {
        
    }

    public void Play(int _playMusicTrack)
    {
        source.volume=1f;//볼륨 1f로 초기화
        source.clip=clips[_playMusicTrack];
        source.Play();
    }
    public void SetVolumn(float _volum)//볼륨 조절
    {
        source.volume=_volum;
    }

    public void Pause()//일시정지
    {
        source.Pause();
    }

    public void UnPause()//정지해제
    {
        source.UnPause();
    }

    public void stop()//브금 완전 정지
    {
        source.Stop();
    }

    public void FadeOutMusic()//음악이 서서히 꺼지는 효과
    {
        StopAllCoroutines();
        StartCoroutine(FadeOutMusicCoroutine());
    }

    IEnumerator FadeOutMusicCoroutine()
    {
        for(float i=1.0f; i>=0f;i-=0.0f)
        {
            source.volume=i;
            yield return waitTime;
        }
    }

    public void FadeInMusic()//서서히 음악이 시작
    {
        StopAllCoroutines();
        StartCoroutine(FadeInMusicCoroutine());
    }

    IEnumerator FadeInMusicCoroutine()
    {
        for(float i=0f; i<=1f;i+=0.01f)
        {
            source.volume=i;
            yield return waitTime;
        }
    }

}
